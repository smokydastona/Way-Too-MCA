name = "mca-ai-tactics-api"
main = "worker-v3.js"
compatibility_date = "2024-01-01"

# Workers.dev subdomain
workers_dev = true

# Durable Object for Federation Coordinator
[[durable_objects.bindings]]
name = "FEDERATION_COORDINATOR"
class_name = "FederationCoordinator"
script_name = "mca-ai-tactics-api"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["FederationCoordinator"]

# KV Namespace for storing tactics data
[[kv_namespaces]]
binding = "TACTICS_KV"
id = "a3cce63d8d8c4facac9653df37d67015"

# Cloudflare Workers AI binding
[ai]
binding = "AI"

# Scheduled job to sync to GitHub (optional - runs every hour)
[triggers]
crons = ["0 * * * *"]  # Every hour at :00

# Environment variables
[vars]
GITHUB_REPO = "smokydastona/Minecraft-machine-learned-collected"
GITHUB_BRANCH = "main"

# Secrets (set with: wrangler secret put GITHUB_TOKEN)
# GITHUB_TOKEN = "your-github-personal-access-token"
# 
# To enable GitHub backup:
# 1. Create GitHub Personal Access Token with 'repo' scope
# 2. Run: wrangler secret put GITHUB_TOKEN
# 3. Paste your token when prompted
# 
# The worker will then automatically backup tactics to:
# https://github.com/smokydastona/Minecraft-machine-learned-collected/tree/main/federated-data
